# Layer 4: åŠŸèƒ½æ¨¡å— (Features) â€” å®žæ–½æ€»çº²

> **ç›®æ ‡**: å®Œæˆç½‘ç«™çš„æ ¸å¿ƒäº¤äº’åŠŸèƒ½ï¼Œä»Žé™æ€å±•ç¤ºå‡çº§ä¸ºåŠ¨æ€åº”ç”¨ã€‚
> **çŠ¶æ€**: å¾…å®žæ–½
> **å‰ç½®ä¾èµ–**: Layer 3 (CMS + i18n) å·²å®Œæˆ âœ…

---

## ä¸€ã€æ¨¡å—æ¦‚è§ˆ

æœ¬å±‚çº§åˆ†ä¸º 5 ä¸ªå­é˜¶æ®µï¼Œ**æŒ‰å®žæ–½é¡ºåºæŽ’åˆ—**ï¼š

| å®žæ–½é¡ºåº | é˜¶æ®µ | æ¨¡å— | æ ¸å¿ƒæŠ€æœ¯ | ä¾èµ– | çŠ¶æ€ |
|:--------:|------|------|----------|------|------|
| 1 | **4.1** | **å…¨ç«™æœç´¢ä¸Žç­›é€‰** | Fuse.js, Astro Islands | Layer 3 âœ… | å¾…å®žæ–½ |
| 2 | **4.2** | **è¯„è®ºç³»ç»Ÿ** | Giscus (GitHub Discussions) | ç‹¬ç«‹ | å¾…å®žæ–½ |
| 3 | **4.3** | **è§†é¢‘å¢žå¼º** | ~~YouTube/Bilibili API~~ | - | âœ… åŸºç¡€å·²å®Œæˆ |
| 4 | **4.4** | **è®¤è¯ç³»ç»Ÿ** | Supabase Auth, Preact | Layer 1 | å¾…å®žæ–½ |
| 5 | **4.5** | **åŽç«¯é‡æž„ & æ´»åŠ¨** | FastAPI, SQLAlchemy 2.0 | 4.4 | å¾…å®žæ–½ |

### æŽ’åºé€»è¾‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 4.1 (æœç´¢ç­›é€‰)  â”€â”€â–º çº¯å‰ç«¯ï¼Œæ— ä¾èµ–ï¼Œç«‹å³å¯åš              â”‚
â”‚          â†“                                                      â”‚
â”‚  Phase 4.2 (è¯„è®º)      â”€â”€â–º ç‹¬ç«‹æ¨¡å—ï¼Œå¯ä¸Ž 4.1 å¹¶è¡Œ              â”‚
â”‚          â†“                                                      â”‚
â”‚  Phase 4.3 (è§†é¢‘)      â”€â”€â–º âœ… å·²å®ŒæˆåŸºç¡€åŠŸèƒ½                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 4.4 (è®¤è¯)      â”€â”€â–º éœ€è¦ Supabase é…ç½®                   â”‚
â”‚          â†“                                                      â”‚
â”‚  Phase 4.5 (åŽç«¯)      â”€â”€â–º ä¾èµ– 4.4 è®¤è¯ï¼Œå·¥ä½œé‡æœ€å¤§            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€è¯¦ç»†å®žæ–½æ–¹æ¡ˆ

### Phase 4.1: å…¨ç«™æœç´¢ä¸Žç­›é€‰ç³»ç»Ÿ (Search & Filter) ðŸš€ ä¼˜å…ˆ

> **ç›®æ ‡**: ä¸ºæ‰€æœ‰äº”å¤§å†…å®¹æ¿å—æä¾›ç»Ÿä¸€çš„æœç´¢ã€åˆ†ç±»ã€ç­›é€‰åŠŸèƒ½ã€‚
> **ç±»åž‹**: çº¯å‰ç«¯
> **é¢„è®¡å·¥ä½œé‡**: ä¸­ç­‰

#### è¦†ç›–æ¿å—

| æ¿å— | Collection | æœç´¢å­—æ®µ | ç­›é€‰ç»´åº¦ |
|------|------------|----------|----------|
| **è½¦å½±éª‘è¸ª** | `media` | title, description | type (å½±åƒ/è®¿è°ˆ/ç¿»å±±è¶Šå²­), date |
| **å™¨æ¢°çŸ¥è¯†** | `gear` | title, description, author | author, date |
| **ç§‘å­¦è®­ç»ƒ** | `training` | title, description, author | author, date |
| **éª‘è¡Œè·¯çº¿** | `routes` | name, region | difficulty, distance range, elevation range |
| **æ…•åŸŽæ—¥å¸¸** | `events` | title, location | date range, event type |

#### æŠ€æœ¯æ–¹æ¡ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Build Time                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Astro Content Collections                              â”‚
â”‚           â†“                                             â”‚
â”‚  /api/search-index.json  (é™æ€ç”Ÿæˆçš„æœç´¢ç´¢å¼•)            â”‚
â”‚           â†“                                             â”‚
â”‚  åŒ…å«æ‰€æœ‰æ¿å—çš„ metadata + å¯æœç´¢å­—æ®µ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Runtime (Client)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Fuse.js (è½»é‡æ¨¡ç³Šæœç´¢åº“, ~5KB gzipped)                  â”‚
â”‚           â†“                                             â”‚
â”‚  SearchBar.tsx (Preact Island)                          â”‚
â”‚  - å…¨å±€æœç´¢å…¥å£ (Header)                                â”‚
â”‚  - å®žæ—¶æœç´¢å»ºè®®                                         â”‚
â”‚  - é”®ç›˜å¯¼èˆª (â†‘â†“ Enter Esc)                              â”‚
â”‚           â†“                                             â”‚
â”‚  FilterPanel.tsx (å„æ¿å—åˆ—è¡¨é¡µ)                          â”‚
â”‚  - å¤šé€‰ç­›é€‰å™¨                                           â”‚
â”‚  - URL å‚æ•°åŒæ­¥ (?difficulty=easy&region=Munich)        â”‚
â”‚  - ç­›é€‰ç»“æžœè®¡æ•°                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä»»åŠ¡æ¸…å•

##### 4.1.1 æœç´¢ç´¢å¼•ç”Ÿæˆ

1. [ ] `src/pages/api/search-index.json.ts`: æž„å»ºæ—¶ç”Ÿæˆå…¨ç«™æœç´¢ç´¢å¼•
   ```typescript
   // è¾“å‡ºç»“æž„
   {
     "media": [{ slug, title, description, type, date, lang }],
     "gear": [{ slug, title, description, author, date, lang }],
     "training": [{ slug, title, description, author, date, lang }],
     "routes": [{ slug, name, region, difficulty, distance, elevation, lang }],
     "events": [{ slug, title, location, date, lang }]
   }
   ```

##### 4.1.2 å…¨å±€æœç´¢ç»„ä»¶

2. [ ] `src/components/search/SearchBar.tsx` (Preact Island)
   - æœç´¢æ¡† UI (å¸¦å›¾æ ‡)
   - Fuse.js å®žä¾‹åˆå§‹åŒ–
   - å®žæ—¶æœç´¢ç»“æžœä¸‹æ‹‰
   - ç»“æžœåˆ†ç»„æ˜¾ç¤º (æŒ‰æ¿å—)
   - é”®ç›˜å¯¼èˆªæ”¯æŒ
   - å¤šè¯­è¨€æœç´¢ç»“æžœé“¾æŽ¥

3. [ ] `src/components/search/SearchResult.tsx`
   - å•æ¡æœç´¢ç»“æžœæ¸²æŸ“
   - é«˜äº®åŒ¹é…æ–‡æœ¬
   - æ˜¾ç¤ºæ¿å—æ ‡ç­¾

##### 4.1.3 æ¿å—ç­›é€‰ç»„ä»¶

4. [ ] `src/components/filter/FilterPanel.tsx` (é€šç”¨ç­›é€‰é¢æ¿)
   - æŽ¥æ”¶ç­›é€‰é…ç½® props
   - å¤šé€‰ checkbox ç»„
   - èŒƒå›´æ»‘å— (è·ç¦»/çˆ¬å‡)
   - æ—¥æœŸèŒƒå›´é€‰æ‹©

5. [ ] `src/components/filter/FilterChip.tsx`
   - å·²é€‰ç­›é€‰æ¡ä»¶æ ‡ç­¾
   - å¯ç‚¹å‡»ç§»é™¤

##### 4.1.4 å„æ¿å—é›†æˆ

6. [ ] æ›´æ–° `[lang]/media/index.astro`:
   - æ·»åŠ  type ç­›é€‰
   - æ·»åŠ æ—¥æœŸæŽ’åº

7. [ ] æ›´æ–° `[lang]/knowledge/gear/index.astro`:
   - æ·»åŠ  author ç­›é€‰

8. [ ] æ›´æ–° `[lang]/knowledge/training/index.astro`:
   - æ·»åŠ  author ç­›é€‰

9. [ ] æ›´æ–° `[lang]/routes/index.astro`:
   - æ·»åŠ  difficulty ç­›é€‰ (å¤šé€‰)
   - æ·»åŠ  distance èŒƒå›´ç­›é€‰
   - æ·»åŠ  elevation èŒƒå›´ç­›é€‰
   - æ·»åŠ  region ç­›é€‰

10. [ ] æ›´æ–° `[lang]/events/index.astro`:
    - æ·»åŠ æ—¥æœŸèŒƒå›´ç­›é€‰
    - æ·»åŠ  "å³å°†ä¸¾è¡Œ" / "å·²ç»“æŸ" åˆ‡æ¢

##### 4.1.5 URL çŠ¶æ€åŒæ­¥

11. [ ] `src/lib/filterState.ts`:
    - ç­›é€‰çŠ¶æ€ â†” URL å‚æ•°åŒå‘åŒæ­¥
    - æ”¯æŒæµè§ˆå™¨å‰è¿›/åŽé€€
    - æ”¯æŒåˆ†äº«ç­›é€‰åŽçš„é“¾æŽ¥

#### äº¤ä»˜ç‰©

* `frontend/src/pages/api/search-index.json.ts`
* `frontend/src/components/search/*`
* `frontend/src/components/filter/*`
* `frontend/src/lib/filterState.ts`
* æ›´æ–°åŽçš„å„æ¿å—åˆ—è¡¨é¡µ

#### éªŒæ”¶æ ‡å‡†

- [ ] å…¨å±€æœç´¢å¯æœç´¢æ‰€æœ‰æ¿å—å†…å®¹
- [ ] æœç´¢ç»“æžœæŒ‰æ¿å—åˆ†ç»„ï¼Œç‚¹å‡»å¯è·³è½¬
- [ ] å„æ¿å—ç­›é€‰å™¨å·¥ä½œæ­£å¸¸
- [ ] ç­›é€‰çŠ¶æ€åæ˜ åœ¨ URL ä¸­
- [ ] åˆ·æ–°é¡µé¢ä¿æŒç­›é€‰çŠ¶æ€
- [ ] ç§»åŠ¨ç«¯ç­›é€‰é¢æ¿å¯æŠ˜å 

---

### Phase 4.2: è¯„è®ºç³»ç»Ÿ (Comments)

> **ç›®æ ‡**: ä¸ºå†…å®¹é¡µé¢æ·»åŠ è¯„è®ºåŠŸèƒ½ã€‚
> **ç±»åž‹**: å‰ç«¯ + ç¬¬ä¸‰æ–¹æœåŠ¡
> **é¢„è®¡å·¥ä½œé‡**: å°

#### æŠ€æœ¯æ–¹æ¡ˆ

* **æœåŠ¡**: Giscus (åŸºäºŽ GitHub Discussionsï¼Œå…è´¹)
* **ä¼˜ç‚¹**:
  - æ— éœ€è‡ªå»ºåŽç«¯
  - æ”¯æŒ Markdown
  - ä¸Ž GitHub ç”Ÿæ€é›†æˆ
  - æ”¯æŒå¤šè¯­è¨€

#### ä»»åŠ¡æ¸…å•

1. [ ] **GitHub é…ç½®**:
   - åœ¨ repo å¯ç”¨ Discussions
   - å®‰è£… Giscus App
   - èŽ·å–é…ç½®å‚æ•°

2. [ ] **ç»„ä»¶å¼€å‘**:
   * `src/components/Comments.astro`:
     - å°è£… Giscus script
     - æ”¯æŒä¸»é¢˜åˆ‡æ¢
     - æ”¯æŒå¤šè¯­è¨€æ˜ å°„

3. [ ] **é›†æˆåˆ°å†…å®¹é¡µ**:
   - `[lang]/media/[slug].astro`
   - `[lang]/knowledge/gear/[slug].astro`
   - `[lang]/knowledge/training/[slug].astro`
   - `[lang]/routes/[slug].astro`

#### äº¤ä»˜ç‰©

* `frontend/src/components/Comments.astro`
* æ›´æ–°åŽçš„å†…å®¹è¯¦æƒ…é¡µ

#### éªŒæ”¶æ ‡å‡†

- [ ] Giscus è¯„è®ºæ¡†åŠ è½½æˆåŠŸ
- [ ] å¯æäº¤è¯„è®º
- [ ] è¯„è®ºæ˜¾ç¤ºåœ¨ GitHub Discussions

---

### Phase 4.3: è§†é¢‘å¢žå¼º (Video Enhancement)

> **çŠ¶æ€**: âœ… åŸºç¡€åŠŸèƒ½å·²å®Œæˆ

#### å·²å®ŒæˆåŠŸèƒ½

- [x] YouTube è§†é¢‘åµŒå…¥ (`[lang]/media/[slug].astro:45-47`)
- [x] Bilibili è§†é¢‘åµŒå…¥ (`[lang]/media/[slug].astro:49-56`)
- [x] å“åº”å¼ 16:9 å®¹å™¨
- [x] è‡ªåŠ¨ URL è½¬æ¢ä¸º embed URL

#### å¯é€‰å¢žå¼º (ä½Žä¼˜å…ˆçº§ï¼Œç§»è‡³ Layer 5)

1. [ ] **æŠ½å–ä¸ºå¯å¤ç”¨ç»„ä»¶**: `VideoEmbed.astro`
2. [ ] **è§†é¢‘å…ƒæ•°æ® API** (é€šè¿‡ YouTube/Bilibili API èŽ·å–):
   - è§†é¢‘ç¼©ç•¥å›¾ (ç”¨äºŽåˆ—è¡¨é¡µé¢„è§ˆ)
   - è§†é¢‘æ—¶é•¿
   - æ’­æ”¾é‡ç»Ÿè®¡
3. [ ] **æ‡’åŠ è½½ä¼˜åŒ–**: è§†é¢‘ iframe ä»…åœ¨è¿›å…¥è§†å£æ—¶åŠ è½½

#### å†³ç­–

åŸºç¡€åŠŸèƒ½å·²æ»¡è¶³éœ€æ±‚ï¼Œæ­¤é˜¶æ®µæ ‡è®°ä¸ºå®Œæˆã€‚å¯é€‰å¢žå¼ºç§»è‡³ Layer 5 (ä¼˜åŒ–å±‚)ã€‚

---

### Phase 4.4: è®¤è¯ç³»ç»Ÿ (Authentication)

> **ç›®æ ‡**: å‰ç«¯å®žçŽ°ç”¨æˆ·ç™»å½•ï¼ŒåŽç«¯å‡†å¤‡å¥½ Token éªŒè¯åŸºç¡€ã€‚
> **ç±»åž‹**: å‰ç«¯ + åŽç«¯
> **é¢„è®¡å·¥ä½œé‡**: ä¸­ç­‰

#### æŠ€æœ¯æ–¹æ¡ˆ

* **æœåŠ¡**: Supabase Auth (å…è´¹ tier)
* **å‰ç«¯ SDK**: `@supabase/supabase-js`
* **è®¤è¯æµ**: PKCE Flow (æ›´å®‰å…¨)

#### ä»»åŠ¡æ¸…å•

1. [ ] **Supabase åˆå§‹åŒ–**: èŽ·å– Project URL & Keyã€‚
2. [ ] **å‰ç«¯é›†æˆ**:
   * `src/lib/supabase.ts`: å•ä¾‹å®¢æˆ·ç«¯ã€‚
   * `AuthButton.tsx`: æ˜¾ç¤ºç™»å½•/å¤´åƒã€‚
   * `LoginForm.tsx`: å¤„ç† OAuth (Google/GitHub) å’Œ é‚®ç®±ç™»å½•ã€‚
3. [ ] **åŽç«¯åŸºç¡€ (Critical)**:
   * å®‰è£… `PyJWT`, `cryptography`ã€‚
   * ç¼–å†™ `backend/core/security.py`: éªŒè¯ Supabase JWT ç­¾åçš„ä¾èµ–å‡½æ•° (`verify_token`)ã€‚

#### äº¤ä»˜ç‰©

* `frontend/src/lib/supabase.ts`
* `frontend/src/components/auth/*`
* `backend/core/security.py`

#### éªŒæ”¶æ ‡å‡†

- [ ] å‰ç«¯ `supabase.auth.getUser()` èƒ½èŽ·å–ç”¨æˆ·ä¿¡æ¯
- [ ] åŽç«¯èƒ½è§£æž JWT å¹¶æ‹’ç»æ— æ•ˆ Token

---

### Phase 4.5: åŽç«¯é‡æž„ & æ´»åŠ¨æŠ¥å (Backend Rebuild & Events)

> **ç›®æ ‡**: æŒ‰ç”Ÿäº§æ ‡å‡†é‡å†™åŽç«¯ï¼Œå®žçŽ°æ´»åŠ¨æŠ¥ååŠŸèƒ½ã€‚
> **ç±»åž‹**: åŽç«¯
> **ä¾èµ–**: Phase 4.4 (è®¤è¯ç³»ç»Ÿ)
> **é¢„è®¡å·¥ä½œé‡**: å¤§

#### é‡æž„é‡ç‚¹ (Critical Review)

1. **æ•°æ®åº“é©±åŠ¨**: æ›¿æ¢ `aiosqlite` ä¸º **`asyncpg`** (ç”Ÿäº§çŽ¯å¢ƒæ ‡å‡†)ã€‚
2. **ORM æ¨¡å¼**: å‡çº§ `models.py` ä¸º **SQLAlchemy 2.0 Async** é£Žæ ¼ã€‚
3. **ç”¨æˆ·æ¨¡åž‹**: `Member` è¡¨ ID å¿…é¡»å…¼å®¹ Supabase çš„ **UUID**ï¼Œè€Œä¸æ˜¯è‡ªå¢ž Integerã€‚
4. **æž¶æž„åˆ†å±‚**: å¼•å…¥ Pydantic Schemas (`schemas.py`) åˆ†ç¦»è¯·æ±‚/å“åº”æ•°æ®æ¨¡åž‹ã€‚

#### ä»»åŠ¡æ¸…å•

1. [ ] **åŸºç¡€è®¾æ–½é‡å»º**:
   * `requirements.txt`: æ·»åŠ  `asyncpg`, `pydantic-settings`ã€‚
   * `database.py`: é…ç½® `AsyncSession` å’Œè¿žæŽ¥æ± ã€‚
2. [ ] **æ¨¡åž‹é‡å®šä¹‰ (models.py)**:
   * `Member`: ID ä¸º UUID (å…¼å®¹ Supabase)ã€‚
   * `Event`: `date` (UTC), `max_participants`ã€‚
   * `RSVP`: å…³è” Member UUID å’Œ Event IDã€‚
3. [ ] **çŽ¯å¢ƒé…ç½®**:
   * è®¾ç½® `DATABASE_URL` (Supabase Connection String) åˆ° `.env` å’Œç”Ÿäº§çŽ¯å¢ƒã€‚
4. [ ] **FastAPI è·¯ç”±å¼€å‘**:
   * `POST /api/events`: ç®¡ç†å‘˜åˆ›å»ºæ´»åŠ¨ã€‚
   * `POST /api/events/{id}/rsvp`: ç”¨æˆ·æŠ¥å (ä¾èµ– `verify_token`)ã€‚
   * `GET /api/me/rsvps`: æˆ‘çš„æŠ¥åè®°å½•ã€‚
5. [ ] **é‚®ä»¶æœåŠ¡**: é›†æˆ Resend å‘é€æŠ¥åå›žæ‰§ã€‚

#### äº¤ä»˜ç‰©

* é‡æž„åŽçš„ `backend/` ç›®å½•ç»“æž„
* `backend/routes/events.py`
* `backend/schemas/event.py`

#### éªŒæ”¶æ ‡å‡†

- [ ] **Refactor Check**: ä»£ç ä¸­ä½¿ç”¨ `await session.execute(select(...))` ç­‰å¼‚æ­¥è¯­æ³•
- [ ] Member ID ä¸º UUID æ ¼å¼
- [ ] æŠ¥åæµç¨‹ï¼šç”¨æˆ·ç‚¹å‡»æŠ¥å â†’ API 200 OK â†’ æ•°æ®åº“ RSVP è¡¨æ–°å¢žè®°å½• â†’ é‚®ç®±æ”¶åˆ°é‚®ä»¶

---

## ä¸‰ã€å®žæ–½æ—¶é—´çº¿

```
Week 1-2: Phase 4.1 (æœç´¢ç­›é€‰) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                 â”‚ å¯å¹¶è¡Œ
Week 1:   Phase 4.2 (è¯„è®º) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Week 2:   Phase 4.3 (è§†é¢‘) âœ… å·²å®Œæˆ

Week 3:   Phase 4.4 (è®¤è¯) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                 â”‚ ä¸²è¡Œä¾èµ–
Week 4-5: Phase 4.5 (åŽç«¯) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€éªŒè¯æ ‡å‡†æ±‡æ€»

| é˜¶æ®µ | éªŒè¯é¡¹ |
|------|--------|
| 4.1 | å…¨å±€æœç´¢è¿”å›žè·¨æ¿å—ç»“æžœï¼›å„æ¿å—ç­›é€‰å™¨æ­£å¸¸å·¥ä½œï¼›URL å‚æ•°åŒæ­¥ç­›é€‰çŠ¶æ€ã€‚ |
| 4.2 | Giscus è¯„è®ºæ¡†åŠ è½½æˆåŠŸï¼›å¯æäº¤è¯„è®ºï¼›è¯„è®ºæ˜¾ç¤ºåœ¨ GitHub Discussionsã€‚ |
| 4.3 | âœ… YouTube/Bilibili è§†é¢‘æ­£å¸¸æ’­æ”¾ã€‚ |
| 4.4 | å‰ç«¯ `supabase.auth.getUser()` èƒ½èŽ·å–ç”¨æˆ·ä¿¡æ¯ï¼›åŽç«¯èƒ½è§£æž JWT å¹¶æ‹’ç»æ— æ•ˆ Tokenã€‚ |
| 4.5 | æŠ¥åæµç¨‹ï¼šç”¨æˆ·ç‚¹å‡»æŠ¥å â†’ API 200 OK â†’ æ•°æ®åº“ RSVP è¡¨æ–°å¢žè®°å½• â†’ é‚®ç®±æ”¶åˆ°é‚®ä»¶ã€‚ |

---

## äº”ã€æŠ€æœ¯æ ˆè¡¥å……

### æ–°å¢žä¾èµ–

```json
// frontend/package.json
{
  "dependencies": {
    "fuse.js": "^7.0.0",
    "@supabase/supabase-js": "^2.x"
  }
}
```

```txt
# backend/requirements.txt
asyncpg>=0.29.0
pydantic-settings>=2.0.0
PyJWT>=2.8.0
resend>=0.7.0
```
