# ACC ClubHub æ¶æ„é‡å»ºæ€»çº²

> **ç‰ˆæœ¬**: 1.0  
> **åˆ›å»ºæ—¥æœŸ**: 2026å¹´1æœˆ27æ—¥  
> **é¡¹ç›®**: ACC (Across Cycling Club Munich) é—¨æˆ·ç½‘ç«™  
> **çŠ¶æ€**: å¾…å®æ–½

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šé‡å»ºåŠ¨æœº

### 1.1 åŸæ¶æ„é—®é¢˜è¯Šæ–­

**åŸæŠ€æœ¯æ ˆ**: Quarto

| é—®é¢˜ç»´åº¦ | å…·ä½“è¡¨ç° |
|---------|---------|
| **å·¥å…·å®šä½é”™é…** | Quarto ä¸ºæŠ€æœ¯æ–‡æ¡£è®¾è®¡ï¼ŒéåŠ¨æ€é—¨æˆ· |
| **CSS é€‚é…å›°éš¾** | Bootstrap + Quarto ä¸»é¢˜ä¼˜å…ˆçº§é«˜ï¼Œè¦†ç›–éœ€å¤§é‡ `!important` |
| **äº¤äº’èƒ½åŠ›æœ‰é™** | é™æ€ç”Ÿæˆï¼Œè¡¨å•/ç™»å½•éœ€å¤–éƒ¨æœåŠ¡ |
| **è®¾è®¡è‡ªç”±åº¦ä½** | æ— æ³•å®ç°è“éª‘å£«è®¾è®¡ç³»ç»Ÿçš„å€¾æ–œã€æ‰‹ç»˜æ•ˆæœ |

### 1.2 ç›®æ ‡æ¶æ„

```mermaid
graph TB
    subgraph "å‰ç«¯ Astro"
        A[é—¨æˆ·é¦–é¡µ]
        B[è½¦å½±éª‘è¸ª]
        C[æ…•åŸæ—¥å¸¸]
        D[å™¨æ¢°çŸ¥è¯†]
        E[ç§‘å­¦è®­ç»ƒ]
        F[éª‘è¡Œè·¯çº¿åº“]
    end
    
    subgraph "å†…å®¹ç®¡ç†"
        G[Decap CMS]
        H[GitHub Repo]
    end
    
    subgraph "åç«¯ FastAPI"
        I[æ´»åŠ¨ API]
        J[æŠ¥å API]
        K[é‚®ä»¶æœåŠ¡]
    end
    
    subgraph "è®¤è¯"
        L[Supabase Auth]
    end
    
    subgraph "æ•°æ®"
        M[(Supabase DB)]
    end
    
    A --> L
    C --> I --> M
    G --> H --> A
    J --> K
    
    style A fill:#2A5CA6,color:white
    style I fill:#5F8C4A,color:white
    style L fill:#D94F30,color:white
```

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šå†…å®¹æ¿å—æ˜ å°„

åŸºäº [ACC_2026ç„•æ–°è®¡åˆ’_ä¼åˆ’ä¹¦.md](file:///d:/my_projects/acc_clubhub/docs/ACC_2026%E7%84%95%E6%96%B0%E8%AE%A1%E5%88%92_%E4%BC%81%E5%88%92%E4%B9%A6.md) çš„äº”å¤§æ¿å—ï¼š

| å†…å®¹æ¿å— | è·¯ç”± | åŠŸèƒ½æè¿° | æŠ€æœ¯å®ç° |
|---------|------|---------|---------|
| **ğŸ¬ è½¦å½±éª‘è¸ª** | `/media` | å½±åƒèµ„æ–™ã€éª‘å‹è®¿è°ˆã€ç¿»å±±è¶Šå²­è®°å½• | Decap CMS + VideoEmbed ç»„ä»¶ |
| **ğŸš´ æ…•åŸæ—¥å¸¸** | `/events` | Social Rideã€Training Dayã€æ´»åŠ¨æŠ¥å | FastAPI + æŠ¥åè¡¨å• |
| **ğŸ”§ å™¨æ¢°çŸ¥è¯†** | `/knowledge/gear` | è´­è½¦æŒ‡å—ã€ç»´ä¿® Workshopã€æ–°å“è§£è¯» | Decap CMS + æˆå‘˜è´¡çŒ® |
| **ğŸ“Š ç§‘å­¦è®­ç»ƒ** | `/knowledge/training` | è®­ç»ƒæ–¹æ³•è®ºã€å®‰å…¨ç§‘æ™® | Decap CMS + æˆå‘˜è´¡çŒ® |
| **ğŸ—ºï¸ éª‘è¡Œè·¯çº¿åº“** | `/routes` | å¯æœç´¢è·¯çº¿æ•°æ®åº“ã€Strava/Komoot é“¾æ¥ | Fuse.js æœç´¢ + CMS |

### é¡µé¢ç»“æ„

```
/                          # é¦–é¡µ (ä¸­å¤®å¯¼èˆª Hub)
â”œâ”€â”€ /events                # æ…•åŸæ—¥å¸¸ - æ´»åŠ¨åˆ—è¡¨
â”‚   â””â”€â”€ /events/[id]       # æ´»åŠ¨è¯¦æƒ… + æŠ¥å
â”œâ”€â”€ /media                 # è½¦å½±éª‘è¸ª - å½±åƒåº“
â”‚   â””â”€â”€ /media/[slug]      # å½±åƒ/è®¿è°ˆè¯¦æƒ…
â”œâ”€â”€ /knowledge             # çŸ¥è¯†ä¸­å¿ƒ
â”‚   â”œâ”€â”€ /knowledge/gear    # å™¨æ¢°çŸ¥è¯†
â”‚   â””â”€â”€ /knowledge/training # ç§‘å­¦è®­ç»ƒ
â”œâ”€â”€ /routes                # éª‘è¡Œè·¯çº¿åº“ (å¸¦æœç´¢)
â”‚   â””â”€â”€ /routes/[slug]     # è·¯çº¿è¯¦æƒ…
â”œâ”€â”€ /about                 # å…³äº ACC
â””â”€â”€ /admin                 # Decap CMS åå°
```

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŠ€æœ¯æ ˆè¯¦è§£

### 3.1 å‰ç«¯: Astro

| é€‰æ‹©ç†ç”± |
|---------|
| é™æ€ä¼˜å…ˆï¼ŒSEO å‹å¥½ |
| åŸç”Ÿæ”¯æŒ Markdown/MDX |
| Islands Architecture â€” æŒ‰éœ€åŠ è½½ JS |
| 100% æ§åˆ¶ HTML/CSS è¾“å‡º |
| å†…ç½® i18n å¤šè¯­è¨€è·¯ç”± |

### 3.2 åç«¯: FastAPI

```python
# æ ¸å¿ƒ API ç«¯ç‚¹
POST /api/auth/login          # Supabase JWT éªŒè¯
GET  /api/events              # æ´»åŠ¨åˆ—è¡¨
POST /api/events              # åˆ›å»ºæ´»åŠ¨ (admin)
POST /api/events/{id}/rsvp    # æ´»åŠ¨æŠ¥å
GET  /api/events/{id}/rsvps   # æŠ¥ååˆ—è¡¨ (admin)
```

### 3.3 è®¤è¯: Supabase Auth

- Google OAuth âœ…
- GitHub OAuth âœ…
- Email/Password âœ…
- å…è´¹ 50,000 MAU

### 3.4 å†…å®¹ç®¡ç†: Decap CMS + æˆå‘˜è´¡çŒ®

- å¯è§†åŒ–ç¼–è¾‘å™¨
- GitHub å­˜å‚¨
- æ— éœ€æœåŠ¡å™¨

> [!IMPORTANT]
> **æˆå‘˜å†…å®¹è´¡çŒ®æµç¨‹** (å™¨æ¢°çŸ¥è¯† / ç§‘å­¦è®­ç»ƒ):
> 1. ç®¡ç†å‘˜åœ¨ GitHub ä»“åº“ Settings â†’ Collaborators æ·»åŠ æˆå‘˜ GitHub è´¦å·
> 2. æˆå‘˜è®¿é—® `/admin` å¹¶é€šè¿‡ GitHub OAuth ç™»å½•
> 3. åœ¨å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­æ’°å†™æ–‡ç« 
> 4. ç‚¹å‡»ã€Œå‘å¸ƒã€â†’ è‡ªåŠ¨æäº¤åˆ° GitHub â†’ ç½‘ç«™æ›´æ–°

> [!NOTE]
> **ä¸¤å¥—ç‹¬ç«‹ç™»å½•ç³»ç»Ÿ**:
> | ç³»ç»Ÿ | å…¥å£ | ç”¨é€” | å¯¹è±¡ |
> |------|------|------|------|
> | Supabase Auth | ç½‘ç«™å‰å° | æ´»åŠ¨æŠ¥åã€è¯„è®º | æ‰€æœ‰è®¿å®¢ |
> | Decap CMS | `/admin` | æ’°å†™/å‘å¸ƒæ–‡ç«  | GitHub ä»“åº“ Collaborators |

### 3.5 é‚®ä»¶: Resend

- å…è´¹ 3,000 å°/æœˆ
- å¼€å‘è€…å‹å¥½ API
- è‰¯å¥½é€è¾¾ç‡

---

## ç¬¬å››éƒ¨åˆ†ï¼šå®æ–½è®¡åˆ’ (åŸºäº Iterative Plan)

> **çŠ¶æ€æ›´æ–°**: æˆªè‡³ 2026-01-29ï¼ŒLayer 1 (éª¨æ¶)ã€Layer 2 (æ ·å¼)ã€Layer 3 (å†…å®¹) å‡å·²å®Œæˆã€‚Sveltia CMS ä¸å¤šè¯­è¨€ (i18n) åŸºç¡€å·²å°±ç»ªã€‚

### 4.1 å®æ–½åˆ†å±‚æ¦‚è§ˆ

| å±‚æ¬¡ | æè¿° | çŠ¶æ€ | å…³é”®æŠ€æœ¯ |
|------|------|------|----------|
| **Layer 1: éª¨æ¶** | åŸºç¡€ Astro é¡¹ç›®ç»“æ„ã€è·¯ç”±è§„åˆ’ã€å¸ƒå±€ç»„ä»¶ | âœ… å·²å®Œæˆ | Astro, Components |
| **Layer 2: æ ·å¼** | è¿ç§» "è“éª‘å£«" è®¾è®¡ç³»ç»Ÿï¼Œå®ç° CSS å˜é‡ä¸ç»„ä»¶æ ·å¼ | âœ… å·²å®Œæˆ | CSS Variables, Responsive Design |
| **Layer 3: å†…å®¹** | æ­å»º CMSã€å®šä¹‰å†…å®¹é›†åˆã€å®ç° i18n åŠ¨æ€æ¸²æŸ“ | âœ… å·²å®Œæˆ | Sveltia CMS, Content Collections, i18n |
| **Layer 4: åŠŸèƒ½** | ç”¨æˆ·è®¤è¯ã€æ´»åŠ¨æŠ¥åç³»ç»Ÿã€è·¯çº¿æœç´¢ã€è¯„è®ºäº’åŠ¨ | ğŸš§ å¾…å¯åŠ¨ | FastAPI, Supabase, Fuse.js |

### 4.2 å½“å‰æ–‡ä»¶ç»“æ„ (Layer 3 å®Œæˆæ€)

```
acc_clubhub/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.html            # Sveltia CMS å…¥å£
â”‚   â”‚   â”‚   â””â”€â”€ config.yml            # CMS é…ç½® (GitHub OAuth)
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ content.config.ts         # å†…å®¹é›†åˆå®šä¹‰ (Zod Schema)
â”‚   â”‚   â”œâ”€â”€ content/                  # å†…å®¹æ–‡ä»¶ (Media, Knowledge, Routes)
â”‚   â”‚   â”‚   â”œâ”€â”€ media/zh/*.md
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ components/               # UI ç»„ä»¶ (Header, Footer, Cards...)
â”‚   â”‚   â”œâ”€â”€ layouts/                  # å¸ƒå±€ (BaseLayout, ArticleLayout)
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â””â”€â”€ i18n.ts               # å¤šè¯­è¨€å·¥å…·
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â””â”€â”€ [lang]/               # åŠ¨æ€å¤šè¯­è¨€è·¯ç”±
â”‚   â”‚   â”‚       â”œâ”€â”€ index.astro
â”‚   â”‚   â”‚       â”œâ”€â”€ media/
â”‚   â”‚   â”‚       â”œâ”€â”€ knowledge/
â”‚   â”‚   â”‚       â””â”€â”€ routes/
â”‚   â”‚   â””â”€â”€ styles/                   # æ ·å¼åº“
â”‚   â”‚       â””â”€â”€ blaue-reiter.css
â”‚   â””â”€â”€ astro.config.mjs
â”œâ”€â”€ backend/                          # FastAPI åç«¯ (Layer 4 é‡ç‚¹)
â”‚   â”œâ”€â”€ app.py
â”‚   â””â”€â”€ ...
â””â”€â”€ docs/                             # é¡¹ç›®æ–‡æ¡£
```

### 4.3 ä¸‹ä¸€é˜¶æ®µé‡ç‚¹ (Layer 4)

#### 4.1 è®¤è¯ä¸ç”¨æˆ·ç³»ç»Ÿ
- **ç›®æ ‡**: å®ç°åŸºäº Supabase çš„ç”¨æˆ·æ³¨å†Œ/ç™»å½• (Google/GitHub/Email)ã€‚
- **äº¤ä»˜ç‰©**: `frontend/src/lib/auth.ts`, `backend/auth.py`, ç™»å½• UI ç»„ä»¶ã€‚

#### 4.2 æ…•åŸæ—¥å¸¸ (Events) & æŠ¥å
- **ç›®æ ‡**: å®Œæ•´çš„æ´»åŠ¨å‘å¸ƒä¸æŠ¥åæµç¨‹ã€‚
- **äº¤ä»˜ç‰©**: `backend/routes/events.py`, `backend/routes/rsvp.py`, é‚®ä»¶é€šçŸ¥æœåŠ¡ã€‚

#### 4.3 è·¯çº¿æœç´¢ä¸äº’åŠ¨
- **ç›®æ ‡**: è·¯çº¿å¤šç»´åº¦ç­›é€‰ä¸æ¨¡ç³Šæœç´¢ï¼Œè§†é¢‘åµŒå…¥ä¸è¯„è®ºåŠŸèƒ½ã€‚
- **äº¤ä»˜ç‰©**: Fuse.js æœç´¢é›†æˆ, Giscus è¯„è®ºç»„ä»¶, VideoEmbed ç»„ä»¶ã€‚

---

## ç¬¬äº”éƒ¨åˆ†ï¼šéªŒè¯æ¸…å• (å·²æ›´æ–°)

| é˜¶æ®µ | éªŒè¯é¡¹ | çŠ¶æ€ |
|------|-------|------|
| **Layer 1** | ç½‘ç«™éª¨æ¶æ­å»ºï¼Œé¡µé¢è·¯ç”±äº’é€š | âœ… PASS |
| **Layer 2** | è“éª‘å£«è®¾è®¡é£æ ¼è½åœ°ï¼Œå“åº”å¼é€‚é… | âœ… PASS |
| **Layer 3** | CMS åå°å¯è®¿é—®ï¼Œæ”¯æŒ GitHub ç™»å½• | âœ… PASS |
| **Layer 3** | å¤šè¯­è¨€ (zh/en/de) å†…å®¹å‘å¸ƒä¸åŠ¨æ€æ¸²æŸ“ | âœ… PASS |
| **Layer 3** | CI/CD æµæ°´çº¿ (Vitest + Playwright) | âœ… PASS |
| **Layer 4** | ç”¨æˆ·ç™»å½•ä¸é‰´æƒ | â¬œ TODO |
| **Layer 4** | æ´»åŠ¨åˆ›å»ºä¸æŠ¥åæµç¨‹ | â¬œ TODO |
| **Layer 4** | è·¯çº¿æœç´¢åŠŸèƒ½ | â¬œ TODO |

---

## é™„å½•

### A. ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è·¯å¾„ |
|------|------|
| ACC 2026 ä¼åˆ’ä¹¦ | [ACC_2026ç„•æ–°è®¡åˆ’_ä¼åˆ’ä¹¦.md](file:///d:/my_projects/acc_clubhub/docs/ACC_2026%E7%84%95%E6%96%B0%E8%AE%A1%E5%88%92_%E4%BC%81%E5%88%92%E4%B9%A6.md) |
| è“éª‘å£«è®¾è®¡æŒ‡å— | [atomic_guide.md](file:///d:/my_projects/acc_clubhub/assets/styles/atomic_guide/atomic_guide.md) |
| ç°æœ‰ CSS | [blaue_reiter.css](file:///d:/my_projects/acc_clubhub/assets/styles/blaue_reiter.css) |
| ç°æœ‰åç«¯æ¨¡å‹ | [backend/models.py](file:///d:/my_projects/acc_clubhub/backend/models.py) |

### B. å¤–éƒ¨æœåŠ¡

| æœåŠ¡ | ç”¨é€” | æ³¨å†Œé“¾æ¥ |
|------|------|---------|
| Supabase | è®¤è¯ + æ•°æ®åº“ | supabase.com |
| Resend | é‚®ä»¶å‘é€ | resend.com |
| Vercel | å‰ç«¯éƒ¨ç½² | vercel.com |
| Railway | åç«¯éƒ¨ç½² | railway.app |

### C. å†³ç­–è®°å½•

| æ—¥æœŸ | å†³ç­– | ç†ç”± |
|------|------|------|
| 2026-01-27 | æ”¾å¼ƒ Quarto | è®¾è®¡è‡ªç”±åº¦ä¸è¶³ï¼Œæ— æ³•æ”¯æŒäº¤äº’åŠŸèƒ½ |
| 2026-01-27 | ä¸å¤ç”¨ REMS å‰ç«¯ | éœ€è¦ç»Ÿä¸€è®¾è®¡é£æ ¼ï¼Œé¿å…è·³è½¬ |
| 2026-01-27 | é€‰æ‹© Astro | é™æ€ä¼˜å…ˆã€è®¾è®¡è‡ªç”±ã€i18n æ”¯æŒ |
| 2026-01-27 | é€‰æ‹© Supabase | Google/GitHub OAuthï¼Œå…è´¹é¢åº¦å¤§ |
