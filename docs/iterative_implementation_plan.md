# ACC ClubHub è¿­ä»£å¼€å‘æµç¨‹

> **çŠ¶æ€æ›´æ–° (2026-01-29)**: 
> - **Layer 1 (éª¨æ¶)**: âœ… å·²å®Œæˆ
> - **Layer 2 (æ ·å¼)**: âœ… å·²å®Œæˆ
> - **Layer 3 (å†…å®¹)**: âœ… å·²å®Œæˆ (é‡‡ç”¨ Sveltia CMS + i18n)
> - **Layer 4 (åŠŸèƒ½)**: ğŸš§ å¾…å¯åŠ¨

> **ç†å¿µ**: æ­ä¹é«˜ï¼Œå…ˆéª¨æ¶ã€åæ ·å¼ã€å†åŠŸèƒ½  
> **åŸåˆ™**: æ¯ä¸€å±‚å®Œæˆåéƒ½æ˜¯å¯è¿è¡Œã€å¯é¢„è§ˆçš„çŠ¶æ€

---

## å¼€å‘å±‚æ¬¡æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 4: åŠŸèƒ½æ¨¡å— (NEXT)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Layer 3: å†…å®¹ç³»ç»Ÿ (DONE)                        â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚  Layer 2: æ ·å¼çš®è‚¤ (DONE)                    â”‚â”‚â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚
â”‚  â”‚  â”‚  â”‚  Layer 1: éª¨æ¶ç»“æ„ (DONE)                â”‚â”‚â”‚â”‚
â”‚  â”‚  â”‚  â”‚  (HTML ç»“æ„ + å¯¼èˆª + å ä½ç¬¦)              â”‚â”‚â”‚â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚â”‚
â”‚  â”‚  â”‚  (è“éª‘å£« CSS + ç»„ä»¶æ ·å¼)                     â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚  (Sveltia CMS + i18n å†…å®¹é›†åˆ)                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  (è®¤è¯ + æŠ¥å + æœç´¢ + é‚®ä»¶)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Layer 1: éª¨æ¶ (Skeleton) - [å·²å®Œæˆ]

> **ç›®æ ‡**: ç½‘ç«™èƒ½è·‘èµ·æ¥ï¼Œæ‰€æœ‰é¡µé¢èƒ½ç‚¹å‡»ï¼Œå†…å®¹ç”¨å ä½ç¬¦ (å·²è¾¾æˆ)

### äº¤ä»˜ç‰© (å·²å­˜æ¡£)

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â””â”€â”€ BaseLayout.astro      # åŸºç¡€å¸ƒå±€
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Header.astro          # å¯¼èˆªæ 
â”‚   â”‚   â””â”€â”€ Footer.astro          # é¡µè„š
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ [lang]/               # i18n åŠ¨æ€è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ index.astro       # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ media/            # è½¦å½±éª‘è¸ª
â”‚   â”‚   â”‚   â”œâ”€â”€ knowledge/        # çŸ¥è¯†åº“
â”‚   â”‚   â”‚   â””â”€â”€ routes/           # è·¯çº¿åº“
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ base.css              # Reset CSS
```

---

## Layer 2: æ ·å¼ (Style) - [å·²å®Œæˆ]

> **ç›®æ ‡**: å¥—ä¸Šè“éª‘å£«è®¾è®¡ç³»ç»Ÿï¼Œç½‘ç«™å˜å¥½çœ‹ (å·²è¾¾æˆ)

### äº¤ä»˜ç‰© (å·²å­˜æ¡£)

```
frontend/src/styles/
â”œâ”€â”€ blaue-reiter.css              # æ ¸å¿ƒæ ·å¼åº“
â”œâ”€â”€ variables.css                 # CSS å˜é‡
â””â”€â”€ components/
    â”œâ”€â”€ header.css
    â”œâ”€â”€ footer.css
    â”œâ”€â”€ cards.css                 # ç€‘å¸ƒæµ/æ ‡å‡†å¡ç‰‡
    â””â”€â”€ buttons.css
```

---

## Layer 3: å†…å®¹ (Content) - [å·²å®Œæˆ]

> **ç›®æ ‡**: CMS å¯ç”¨ï¼Œæ”¯æŒå¤šè¯­è¨€ (i18n)ï¼Œèƒ½å‘å¸ƒæ–‡ç«  (å·²è¾¾æˆ)
> **è¯¦ç»†æ¡£æ¡ˆ**: [Layer 3 Master Plan](./rebuild_plan/layer3_master_plan.md)

### âœ… Phase 3.1: CMS åŸºç¡€é…ç½® (Optimized)
- [x] **Sveltia CMS** é›†æˆ (æ›¿ä»£ Phase 3.1 åŸè®¡åˆ’çš„ Decap CMSï¼Œä½“ç§¯æ›´å°ï¼Œi18n æ”¯æŒæ›´å¥½)
- [x] é…ç½® `public/admin/config.yml` (é…ç½® GitHub Backend, Collections, Fields)
- [x] ç¡®ç«‹å¤šè¯­è¨€ç­–ç•¥: `multiple_folders` ç»“æ„

### âœ… Phase 3.2: Content Collections
- [x] å®šä¹‰ `src/content.config.ts` (Zod Schema æ ¡éªŒ)
- [x] å»ºç«‹å†…å®¹ç›®å½•ç»“æ„ (`src/content/{media,knowledge,routes}/{zh,en,de}`)
- [x] åˆ›å»ºå„ç±»åˆ«çš„ä¸­æ–‡ç¤ºä¾‹å†…å®¹ (Markdown)

### âœ… Phase 3.3: åŠ¨æ€é¡µé¢ç”Ÿæˆ
- [x] å®ç° i18n åŠ¨æ€è·¯ç”± (`src/pages/[lang]/`)
- [x] å‰ç«¯ç»„ä»¶å¤šè¯­è¨€é€‚é… (`Header`, `BaseLayout`, `i18n.ts`)
- [x] å¼€å‘å„ç±»å†…å®¹åˆ—è¡¨é¡µ (`index.astro`) ä¸è¯¦æƒ…é¡µ (`[slug].astro`)

### âœ… Phase 3.4: ç”Ÿäº§ç¯å¢ƒè®¤è¯
- [x] éƒ¨ç½² sveltia-cms-auth åˆ° Cloudflare Workers (ä½œä¸º GitHub OAuth Proxy)
- [x] æ³¨å†Œå¹¶é…ç½® GitHub OAuth App
- [x] ç”Ÿäº§ç¯å¢ƒé…ç½®åˆ‡æ¢ (Backend è®¾ä¸º `github`, `base_url` æŒ‡å‘ Worker)

### âœ… Phase 3.5: æµ‹è¯•ä½“ç³»å®Œå¤‡åŒ–
- [x] å•å…ƒæµ‹è¯•: è¦†ç›– i18n é€»è¾‘ (Vitest)
- [x] E2E æµ‹è¯•: è¦†ç›–è·¯ç”±ã€é¡µé¢æ¸²æŸ“ã€å“åº”å¼ (Playwright)
- [x] CI/CD: é…ç½® GitHub Actions è‡ªåŠ¨è¿è¡Œæµ‹è¯•

### æ ¸å¿ƒäº¤ä»˜ç‰©æ¦‚è§ˆ

```
frontend/
â”œâ”€â”€ public/admin/
â”‚   â”œâ”€â”€ index.html                # Sveltia CMS Entry
â”‚   â””â”€â”€ config.yml                # CMS Configuration
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ content.config.ts         # Collections Definition
â”‚   â”œâ”€â”€ content/                  # Markdown Content (i18n structure)
â”‚   â”œâ”€â”€ pages/[lang]/             # Dynamic i18n Routes
â”‚   â””â”€â”€ lib/i18n.ts               # i18n Utilities
â””â”€â”€ .github/workflows/test.yml    # CI/CD Pipeline
```

---

## Layer 4: åŠŸèƒ½ (Features) - [å¾…å¯åŠ¨]

> **ç›®æ ‡**: æ ¸å¿ƒäº¤äº’åŠŸèƒ½ä¸Šçº¿

### 4.1 è®¤è¯ç³»ç»Ÿ & ç”¨æˆ·ä¸­å¿ƒ

| äº¤ä»˜ç‰© | è¯´æ˜ |
|-------|------|
| `backend/auth` | FastAPI + JWT è®¤è¯ |
| `frontend/src/lib/auth.ts` | å®¢æˆ·ç«¯ Auth çŠ¶æ€ç®¡ç† |
| `frontend/src/components/Auth/` | ç™»å½•/æ³¨å†Œ/ä¸ªäººä¸­å¿ƒ UI |

### 4.2 æ´»åŠ¨æŠ¥å (æ…•åŸæ—¥å¸¸) - Events

> **æ³¨**: ç›®å‰ `events` ä»…ä¸ºå ä½ç¬¦ï¼ŒLayer 4 å°†å®Œå…¨å®ç°

| äº¤ä»˜ç‰© | è¯´æ˜ |
|-------|------|
| `backend/routes/events.py` | æ´»åŠ¨ç®¡ç† API |
| `backend/routes/rsvp.py` | æŠ¥å API |
| `frontend/src/pages/[lang]/events/` | æ´»åŠ¨åˆ—è¡¨ä¸è¯¦æƒ…é¡µ |
| `backend/services/email.py` | é‚®ä»¶é€šçŸ¥æœåŠ¡ |

### 4.3 æœç´¢ä¸ç­›é€‰

| äº¤ä»˜ç‰© | è¯´æ˜ |
|-------|------|
| `frontend/src/lib/search.ts` | Fuse.js å‰ç«¯æ¨¡ç³Šæœç´¢ |
| `frontend/src/components/RouteFilter.astro` | è·¯çº¿å¤šç»´åº¦ç­›é€‰ |

### 4.4 äº’åŠ¨å¢å¼º

| äº¤ä»˜ç‰© | è¯´æ˜ |
|-------|------|
| `frontend/src/components/Comments.astro` | Giscus è¯„è®ºé›†æˆ |
| `frontend/src/components/VideoEmbed.astro` | ä¼˜åŒ–çš„è§†é¢‘æ’­æ”¾ç»„ä»¶ |

### é¢„è®¡æ—¶é—´: å¾…è¯„ä¼°

---

## é‡Œç¨‹ç¢‘æ£€æŸ¥ç‚¹

| é‡Œç¨‹ç¢‘ | å®Œæˆæ ‡å¿— | çŠ¶æ€ |
|-------|---------|------|
| **M1** | Layer 1 å®Œæˆ | âœ… DONE |
| **M2** | Layer 2 å®Œæˆ | âœ… DONE |
| **M3** | Layer 3 å®Œæˆ (CMS + i18n) | âœ… DONE |
| **M4** | Layer 4 å®Œæˆ (å…¨åŠŸèƒ½ä¸Šçº¿) | ğŸš§ è®¡åˆ’ä¸­ |

---

å‡†å¤‡å¥½åï¼Œæˆ‘ä»¬å°†è¿›å…¥ **Layer 4: åŠŸèƒ½å¼€å‘** é˜¶æ®µï¼


