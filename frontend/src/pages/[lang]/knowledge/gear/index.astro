---
// src/pages/[lang]/knowledge/gear/index.astro
// å™¨æ¢°çŸ¥è¯† - åˆ—è¡¨é¡µ (ç€‘å¸ƒæµå¸ƒå±€)

import BaseLayout from '../../../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { locales, getLangFromEntry, t, type Locale } from '../../../../lib/i18n';

import GearPage from '../../../../components/content/GearPage';

export function getStaticPaths() {
  return locales.map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params as { lang: Locale };

const allGear = await getCollection('gear');
const langGear = allGear.filter(
  (entry) => getLangFromEntry(entry.filePath, 'gear') === lang
);
const sortedGear = langGear.sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);

const pageTitle = t(lang, 'nav.gear');
---

<BaseLayout title={pageTitle} lang={lang}>
  <div class="page-title-header">
    <div class="title-content">
      <h1>ğŸ”§ {pageTitle}</h1>
      <p class="page-subtitle">
        {lang === 'zh'
          ? 'è´­è½¦æŒ‡å—ã€ç»´ä¿® Workshopã€æ–°å“è§£è¯»'
          : lang === 'de'
            ? 'Kaufberatung, Workshops, Neuheiten'
            : 'Buying Guide, Workshops, New Products'}
      </p>
    </div>
    <div id="filter-portal-target"></div>
  </div>

  <GearPage 
    client:load 
    initialItems={sortedGear} 
    lang={lang} 
  />
</BaseLayout>

<style>
  .page-title-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
    border-bottom: 2px solid var(--color-border-rough);
    padding-bottom: var(--space-md);
  }

  .title-content {
    flex: 1;
    min-width: 280px;
  }

  .title-content h1 {
    margin-bottom: 0.5rem;
  }



  .empty-state {
    text-align: center;
    padding: var(--space-xl);
    color: #666;
    background: rgba(255, 255, 255, 0.5);
    border: 2px dashed var(--color-border-rough);
    border-radius: var(--radius-aero);
    margin-top: var(--space-lg);
  }
</style>
