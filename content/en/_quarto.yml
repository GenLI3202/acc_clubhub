project:
  type: website
  output-dir: ../_site/en

website:
  title: "ACC - Across Cycling Club Munich"
  description: "Making Cycling a Lifestyle"
  
  navbar:
    logo: assets/images/logo.png
    left:
      - text: Home
        href: index.qmd
      - text: Routes
        href: routes/index.qmd
      - text: Knowledge
        menu:
          - text: ACC Workshop
            href: knowledge/workshop/index.qmd
          - text: Gear
            href: knowledge/gear/index.qmd
          - text: Training
            href: knowledge/training/index.qmd
      - text: Events
        href: events/index.qmd
      - text: Media
        href: media/index.qmd
      - text: About
        href: about/index.qmd
    right:
      - text: "üåê English"
        menu:
          - text: "‰∏≠Êñá"
            href: /acc_clubhub/zh/
          - text: "English"
            href: /acc_clubhub/en/
          - text: "Deutsch"
            href: /acc_clubhub/de/

  page-footer:
    center: "¬© 2026 ACC - Across Cycling Club Munich"

format:
  html:
    theme:
      light: cosmo
      dark: darkly
    css: assets/styles/custom.css
    include-after-body: 
      - text: |
          <script>
          document.addEventListener('DOMContentLoaded', function () {
              const langLinks = document.querySelectorAll('.dropdown-menu a[href*="/zh/"], .dropdown-menu a[href*="/en/"], .dropdown-menu a[href*="/de/"]');
              langLinks.forEach(link => {
                  link.addEventListener('click', function (e) {
                      e.preventDefault();
                      const href = this.getAttribute('href');
                      const langMatch = href.match(/(zh|en|de)/);
                      if (!langMatch) return;
                      const targetLang = langMatch[0];
                      const currentPath = window.location.pathname;
                      const langRegex = /\/(zh|en|de)\//;
                      let newPath;
                      if (langRegex.test(currentPath)) {
                          newPath = currentPath.replace(langRegex, '/' + targetLang + '/');
                      } else {
                          const pathParts = currentPath.split('/').filter(p => p);
                          if (pathParts.length > 0 && !['zh', 'en', 'de'].includes(pathParts[0])) {
                              const repoName = pathParts[0];
                              const restPath = pathParts.slice(1).join('/');
                              newPath = '/' + repoName + '/' + targetLang + '/' + (restPath ? restPath : '');
                          } else {
                              newPath = '/' + targetLang + '/' + pathParts.join('/');
                          }
                      }
                      window.location.href = newPath;
                  });
              });
              const currentPath = window.location.pathname;
              let currentLang = 'zh';
              if (currentPath.includes('/en/')) currentLang = 'en';
              if (currentPath.includes('/de/')) currentLang = 'de';
              const currentLangLink = document.querySelector('.dropdown-menu a[href*="/' + currentLang + '/"]');
              if (currentLangLink) currentLangLink.classList.add('active');
          });
          </script>
    toc: true
